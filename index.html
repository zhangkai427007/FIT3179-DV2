<!-- BEGIN: Two charts + analysis boxes -->
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  body{font-family: "Nunito", system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:#f6fbf6; color:#0f172a; margin:18px;}
  .container{max-width:1100px;margin:0 auto;}
  .header{margin-bottom:8px;}
  .title{font-size:1.6rem;font-weight:700;color:#184f63;}
  .subtitle{font-size:1rem;color:#374151;margin-top:6px;font-style:italic;}
  .row{display:grid; grid-template-columns: 1fr 1fr; gap:18px; margin-top:18px;}
  .card{background:#fff;border-radius:10px;padding:12px;box-shadow:0 6px 18px rgba(16,24,40,0.06);min-height:360px; display:flex;flex-direction:column;}
  .card .head{font-weight:700;color:#0b2540;margin-bottom:6px;}
  .vis{flex:1; display:flex; align-items:center; justify-content:center; min-height:260px;}
  .analysis{margin-top:10px;}
  textarea.analysis-box{width:100%;min-height:100px;border:1px solid #e6eef0;padding:8px;border-radius:6px;font-size:0.95rem;resize:vertical}
  .note{font-size:0.85rem;color:#6b7280;margin-top:8px;}
  @media (max-width:900px){ .row{grid-template-columns: 1fr; } }
</style>

<div class="container">
  <div class="header">
    <div class="title">马来西亚变暖：温室效应与环境挑战</div>
    <div class="subtitle">你有没有感觉到马来西亚变得越来越热？</div>
    <div class="note">（下面是你的两张图 — 请在每张图下方填写对应的分析与对话框）</div>
  </div>

  <div class="row">
    <!-- Chart 1: temperature -->
    <figure class="card" id="card-temp">
      <div class="head">温度时间序列（Temperature）</div>
      <div id="vis-temp" class="vis">Loading temperature chart…</div>
      <figcaption class="note">数据来源：你在仓库的 temperature.json</figcaption>

      <div class="analysis">
        <label for="analysis-temp"><strong>分析（Temperature）</strong></label>
        <textarea id="analysis-temp" class="analysis-box" placeholder="在此输入你对温度时序图的观察与解释..."></textarea>
      </div>
    </figure>

    <!-- Chart 2: anomaly -->
    <figure class="card" id="card-anom">
      <div class="head">温度异常（Anomaly）</div>
      <div id="vis-anom" class="vis">Loading anomaly chart…</div>
      <figcaption class="note">数据来源：你在仓库的 anomaly.json</figcaption>

      <div class="analysis">
        <label for="analysis-anom"><strong>对话框 / 说明（Anomaly）</strong></label>
        <textarea id="analysis-anom" class="analysis-box" placeholder="在此写下你对异常图的讨论、问题或结论..."></textarea>
      </div>
    </figure>
  </div>
</div>

<!-- Vega libs -->
<script src="https://cdn.jsdelivr.net/npm/vega@6"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@7"></script>

<script>
  // Chart URLs (raw)
  const tempURL  = "https://raw.githubusercontent.com/zhangkai427007/FIT3179-DV2/main/temperature.json";
  const anomURL  = "https://raw.githubusercontent.com/zhangkai427007/FIT3179-DV2/main/anomaly.json";

  // Embed temperature chart
  vegaEmbed('#vis-temp', tempURL, {renderer: 'svg', actions: true})
    .then(res => console.log("Temperature chart loaded"))
    .catch(err => {
      console.error("Temperature chart error:", err);
      document.getElementById('vis-temp').innerText = '无法加载温度图，请检查 URL 或控制台错误。';
    });

  // Embed anomaly chart
  vegaEmbed('#vis-anom', anomURL, {renderer: 'svg', actions: true})
    .then(res => console.log("Anomaly chart loaded"))
    .catch(err => {
      console.error("Anomaly chart error:", err);
      document.getElementById('vis-anom').innerText = '无法加载异常图，请检查 URL 或控制台错误。';
    });
</script>
<!-- END: Two charts + analysis boxes -->
